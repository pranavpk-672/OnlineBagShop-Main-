

{% load static %}
<!DOCTYPE html>
<html lang="en">

<head>
    
    <title>Customer Home Page</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <link rel="apple-touch-icon" href="{% static 'assets/img/apple-icon.png' %}">
    <link rel="shortcut icon" type="image/x-icon" href="{% static 'assets/img/favicon.ico' %}">

    <link rel="stylesheet" href="{% static 'assets/css/bootstrap.min.css' %}">
    <link rel="stylesheet" href="{% static 'assets/css/templatemo.css' %}">
    <link rel="stylesheet" href="{% static 'assets/css/custom.css' %}">

    <!-- Load fonts style after rendering the layout styles -->
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Roboto:wght@100;200;300;400;500;700;900&display=swap">
    <link rel="stylesheet" href="{% static 'assets/css/fontawesome.min.css' %}">
<!--


https://templatemo.com/tm-559-zay-shop

-->
</head>

<body>

   
    <!-- Start Top Nav -->
    <nav class="navbar navbar-expand-lg bg-dark navbar-light d-none d-lg-block" id="templatemo_nav_top">
        <div class="container text-light">
            <div class="w-100 d-flex justify-content-between">
                <div>
                    <i class="fa fa-envelope mx-2"></i>
                    <a class="navbar-sm-brand text-light text-decoration-none" href="mailto:info@company.com">info@company.com</a>
                    <i class="fa fa-phone mx-2"></i>
                    <a class="navbar-sm-brand text-light text-decoration-none" href="tel:010-020-0340">010-020-0340</a>
                </div>
                <div>
                    <a class="text-light" href="https://fb.com/templatemo" target="_blank" rel="sponsored"><i class="fab fa-facebook-f fa-sm fa-fw me-2"></i></a>
                    <a class="text-light" href="https://www.instagram.com/" target="_blank"><i class="fab fa-instagram fa-sm fa-fw me-2"></i></a>
                    <a class="text-light" href="https://twitter.com/" target="_blank"><i class="fab fa-twitter fa-sm fa-fw me-2"></i></a>
                    <a class="text-light" href="https://www.linkedin.com/" target="_blank"><i class="fab fa-linkedin fa-sm fa-fw"></i></a>
                </div>
            </div>
        </div>
    </nav>
    <!-- Close Top Nav -->


    <!-- Header -->
    <nav class="navbar navbar-expand-lg navbar-light shadow">
        <div class="container d-flex justify-content-between align-items-center">
            <img class="img-fluid" src="{% static 'assets/img/logo3.jpg' %}" alt="">


         <a class="navbar-brand text-success logo h1 align-self-center" href="index.html">
            
            </a>

            <button class="navbar-toggler border-0" type="button" data-bs-toggle="collapse" data-bs-target="#templatemo_main_nav" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>

            <div class="align-self-center collapse navbar-collapse flex-fill  d-lg-flex justify-content-lg-between" id="templatemo_main_nav">
                <div class="flex-fill">
                    <ul class="nav navbar-nav d-flex justify-content-between mx-lg-auto">
                        <li class="nav-item">
                            <a class="nav-link" href="/myauth/home">Home</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="#about">About</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="http://127.0.0.1:8000/myauth/productallview/">Shop</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="#contact">Contact</a>
                        </li>
                        <!--<li class="nav-item">
                            <a class="nav-link" href="/myauth/logout/">Logout</a>
                        </li>-->

                      <!-- <li class="nav-item">
                            <a class="nav-link" href="contact.html">Welcome{{user.username}}</a>
                            
                        </li>

                       
                        <li class="nav-item dropdown">
                            <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-bs-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                                Profile
                            </a>
                            <div class="dropdown-menu" aria-labelledby="navbarDropdown">
                                <a class="dropdown-item" href="">Signup</a>
                                <a class="dropdown-item" href=""></a>
                                <a class="dropdown-item" href="/myauth/logout/">Logout</a>
                            </div>
                        </li>--> 

                        <!--<li class="nav-item dropdown">
                           
                            <a class="nav-link dropdown-toggle" href="#" id="userDropdown" role="button" data-bs-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                                Welcome {{ user.username }}
                            </a>
                            <div class="dropdown-menu" aria-labelledby="userDropdown">
                                <a class="dropdown-item" href="#">Profile</a>
                                <a class="dropdown-item" href="/myauth/logout/">Logout</a>
                            </div>
                          
                        </li>-->


                </div>
                <div class="navbar align-self-center d-flex">
                  <div class="d-lg-none flex-sm-fill mt-3 mb-4 col-7 col-sm-auto pr-3">
                        <div class="input-group">
                            <input type="text" class="form-control" id="inputMobileSearch" placeholder="Search ...">
                            <div class="input-group-text">
                                <i class="fa fa-fw fa-search"></i>
                            </div>
                        </div>
                    </div>
                                <a class="nav-icon d-none d-lg-inline" href="/myauth/search/" >
                        <i class="fa fa-fw fa-search text-dark mr-2"></i>
                    </a>
                    <a class="nav-icon position-relative text-decoration-none" href="/myauth/view_cart/">
                        <i class="fa fa-fw fa-cart-arrow-down text-dark mr-1"></i>
                        <span class="position-absolute top-0 left-100 translate-middle badge rounded-pill bg-light text-dark">
                            {{ cart_items_count }}
                        </span>
                    </a>
                   <!-- <li class="nav-item dropdown">
                           
                        <a class="nav-link dropdown-toggle" href="#" id="userDropdown" role="button" data-bs-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                             {{ user.username }}
                        </a>
                        <div class="dropdown-menu" aria-labelledby="userDropdown">
                            <a class="dropdown-item" href="#">Profile</a>
                            <a class="dropdown-item" href="/myauth/logout/">Logout</a>
                        </div>-->
                      
                    </li>
                    <!--<a class="nav-icon position-relative text-decoration-none" href="#">
                        <i class="fa fa-fw fa-user text-dark mr-3"></i>
                        <span class="position-absolute top-0 left-100 translate-middle badge rounded-pill bg-light text-dark">+99</span>
                    </a>-->
                </div>
            </div>

        </div>
    </nav>
    <!-- Close Header -->





<!DOCTYPE html>
<html>
<head>
    <title>Checkout</title>
</head>
<body>
    <style>
        .bodyy {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background-color: #f8f9fa;
            margin: 0;
            padding: 20px;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
        }

        .card {
            background-color: #fff;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
            border-radius: 12px;
            padding: 30px;
            width: 400px;
            text-align: center;
        }

        h1 {
            color: #333;
            margin-bottom: 20px;
        }

        p {
            margin: 15px 0;
            color: #555;
        }

        #pay-btn {
            background-color: #4caf50;
            color: #fff;
            padding: 12px 24px;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            font-size: 16px;
        }

        #pay-btn:hover {
            background-color: #45a049;
        }

        a {
            color: #007bff;
            text-decoration: none;
        }

        a:hover {
            text-decoration: underline;
        }
    </style>
    <div class="bodyy">
        <div class="card">
            <h1>Checkout</h1>
    
            {% if building_name and road_area and city and state and pincode %}
                 <!-- Display address details -->
    <div id="addressDetails">
        <p>Building Name: {{ building_name }}</p>
        <p>Road/Area: {{ road_area }}</p>
        <p>City: {{ city }}</p>
        <p>State: {{ state }}</p>
        <p>Pincode: {{ pincode }}</p>
        <!-- <button id="editAddress">Edit</button> -->
    </div>

    <!-- Form for editing address details (Initially hidden) -->
    <div id="editAddressForm" style="display: none;">
        <form method="post">
            {% csrf_token %}
            <input type="text" name="building_name" placeholder="Building Name" value="{{ building_name }}"><br>
            <input type="text" name="road_area" placeholder="Road/Area" value="{{ road_area }}"><br>
            <input type="text" name="city" placeholder="City" value="{{ city }}"><br>
            <input type="text" name="state" placeholder="State" value="{{ state }}"><br>
            <input type="text" name="pincode" placeholder="Pincode" value="{{ pincode }}"><br>
            <input type="submit" value="Save">
        </form>
    </div>
                <p><a href="{% url 'updateprofile' %}">Edit Address</a></p>
            {% else %}
                <p>No shipping address available. <a href="{% url 'updateprofile' %}">Add Address</a></p>
            {% endif %}
    
             <input type="hidden" class="tprc" value="{{ total_price }}">
            <p>Total Price: {{ total_price }}</p>

    
            <button id="pay-btn">Checkout</button>
        </div>
    </div>


    {% for index, coupons in seller_coupons.items %}
    <h2>Coupons for Seller ID: {{ index }}</h2>
    <ul>
        {% for coupon in coupons %}
            <li>Coupon Code: {{ coupon.coupon_code }}</li>
            <li>Discount: {{ coupon.discount_percentage }}</li>
            <li>Expiration Date: {{ coupon.expiration_date }}</li>
            <button onclick="applyDiscount('{{coupon.discount_percentage}}')">Apply Coupon</button>
        {% endfor %}
    </ul>
    <!-- Apply Button -->
   
{% endfor %}
    


<script src="https://checkout.razorpay.com/v1/checkout.js"></script>
<!-- <script>
  var options = {

    key: "{{ key }}", 
    amount: "{{ amount }}", 
    currency: "{{ currency }}",
    name: "BAG EMPORIUM", 
    order_id: "{{ razorpay_order_id }}", 
    callback_url: "{{ callback_url }}",
  };

  console.log(options)

  var rzp1 = new Razorpay(options);

  document.getElementById("pay-btn").onclick = function (e) {
    rzp1.open();
    e.preventDefault();
  };

  document.getElementById('editAddress').addEventListener('click', function() {
            document.getElementById('addressDetails').style.display = 'none';
            document.getElementById('editAddressForm').style.display = 'block';
        });



        
</script> -->



<script>
    var options = {
  
      key: "{{ key }}", 
      amount: 5500, 
      currency: "{{ currency }}",
      name: "BAG EMPORIUM", 
      order_id: "{{ razorpay_order_id }}", 
      callback_url: "{{ callback_url }}",
    };
  
   


    function applyDiscount(discountPercentage) {
    console.log(discountPercentage);

    // Get the total price from the hidden input field
    var totalPrice = parseFloat(document.querySelector('.tprc').value);
    
    // Calculate the discount amount
    var discountAmount = totalPrice * (discountPercentage / 100);
    
    // Calculate the new amount after applying the discount
    var newAmount = totalPrice - discountAmount;

    // Update the amount in the options object
 //   options.amount = newAmount.toFixed(2); 

    console.log("New Total Amount After 20% Discount:", options.amount);
}

  
    var rzp1 = new Razorpay(options);
  
    document.getElementById("pay-btn").onclick = function (e) {

  
      rzp1.open();
      e.preventDefault();
    };
  
    document.getElementById('editAddress').addEventListener('click', function() {
              document.getElementById('addressDetails').style.display = 'none';
              document.getElementById('editAddressForm').style.display = 'block';
          });
  
  
  
          
  </script> 
  






</body>
</html>
